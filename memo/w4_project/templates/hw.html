<!doctype html>
<html lang="en">

<head>

    <!-- Webpage Title -->
    <title>상품 페이지</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/mystyle.css') }}">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <!-- Google Web Font -->
    <link href="https://fonts.googleapis.com/css?family=Nanum+Myeongjo|Song+Myung&display=swap" rel="stylesheet">

    <style>
        body {
            margin: 5px;
            background-color: rgba(40, 62, 136, 0.849);
        }

        .container {
            padding: 5px;
        }

        .navbar-brand {
            background-color: mediumseagreen;
            border: solid 2px mediumseagreen;
            border-radius: 5px;
        }

        .row {
            margin: 2px;
        }

        .goodsImage {
            width: 480px;

        }

        .goodsExplanation {
            padding :10px;
            font-size: 15px;
            width: 500px;
            height: 300px;
            background-color: rgb(20, 61, 88);
            border: solid 3px rgb(20, 61, 88);
            color : white;
            border-radius: 5px;

        }

        .goodsExplanation > p{
            font-family: 'Nanum Myeongjo', serif;
        }

        .goodsExplanation > .container{
            border : solid 2px black;
        }
        .goodsExplanation > .container >.row> .col-sm-4{
            background-color: black;
            color: white;
        }

        .goodsExplanation > .container >.row> .col-sm-8{
            background-color: white;
            color: black;
        }

        .goodsScript {
            width: 700px;
            padding: 10px;
            background-color: rgb(233, 232, 194);
            border: solid 3px rgb(233, 232, 194);
            border-radius: 5px;
        }

        .goodsScript > .container{
            border: solid 2px black;
        }
        .goodsScript > .container >.row>.ds{
            font-family: 'Song Myung', serif;
        }

        .goodsScript > .container >.row> .col-sm-4{
            background-color: rgb(248, 176, 21);
            color: black;
        }
    </style>

    <script>

            $(document).ready(function () 
            {
                $('#orders-box').html('');
                listing();
            });

        function checkOrder()
        {
            if($("#order-name").val() =="")
            {
                $("#order-name").focus();
                alert("주문자명을 입력하세요!");
                return false;
            }
            else if($("#order-phone").val() == "")
            {
                $("#order-phone").focus();
                alert("주문자 연락처를 입력하세요!");
                return false;
            }
            else if($("#order-address").val() == "")
            {
                $("#order-address").focus();
                alert("주소를 입력하세요!");
                return false;
            }

            return true;
        }

        
        function make_Order()
        {
            if(checkOrder())
            {
                let name = $("#order-name").val();
                let phone = $("#order-phone").val();
                let address = $('#order-address').val();

                let payment = '계좌 이체';
                if($('input[name=payment]:checked').val() == 2)
                {
                    payment = '신용 카드';
                }

                $.ajax
                ({
                    type : 'POST',
                    url : '/order',
                    data : { 'name_give' : name, 'phone_give' : phone, 'address_give' : address, 'payment_give' : payment},
                    success : function(response)
                    {
                        if (response['result'] == 'success') {
                            alert(response['msg']);
                            window.location.reload();
                        }
                    }
                })
            }
        }

        function listing()
        {
            $.ajax
            ({
                type : 'GET',
                url : '/order',
                data : {},
                success : function(response)
                {
                    if (response['result'] == 'success')
                    {
                        for(let review of response['receipts'])
                        {
                            let name = review['name'];
                            let phone = review['phone'];
                            let address = review['address'];
                            let payment = review['payment'];

                            let temp_html = '<tr>\
                                    <td>'+ name + '</td>\
                                    <td>'+ phone + '</td>\
                                    <td>'+ address + '</td>\
                                    <td>'+ payment + '</td>\
                                </tr>';
                            $('#orders-box').append(temp_html);
                        }
                    }
                    else
                    {
                        alert('리뷰를 받아오지 못했습니다.')
                    }
                }
            })
        }


    </script>


</head>

<body>


    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">Sparta</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">메인 <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">다른 제품 둘러보기</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        고객지원
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="#">자주 묻는 질문</a>
                        <a class="dropdown-item" href="#">1:1 상담</a>
                    </div>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">검색</button>
            </form>
        </div>
    </nav>



    <div class="container">
        <div class="row">
            <span class="badge badge-pill badge-danger">청소년 이용불가</span>
        </div>
        <div class="row">
            <div class="col">
                <div class=goodsImage>
                    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img class="d-block w-100"
                                    src="https://hb.imgix.net/eb53ad3dea5946b4d8fea1313e24ca602daf17b8.jpg?auto=compress,format&fit=crop&h=353&w=616&s=b475999add024b1026b1fa9477e3c57d"
                                    alt="First slide"
                                    style="width: 480px; height: 270px;">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100"
                                    src="https://steamcdn-a.akamaihd.net/steam/apps/374320/ss_fe1dc6761a9004aa39c2e6e62181593b7263edf9.1920x1080.jpg"
                                    alt="Second slide"
                                    style="width: 480px; height: 270px;">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100"
                                    src="https://s3.gaming-cdn.com/images/products/1304/screenshot/dark-souls-3-season-pass-wallpaper-4.jpg"
                                    alt="Third slide"
                                    style="width: 480px; height: 270px;">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button"
                            data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button"
                            data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
            </div>

            <div class="col">
                <div class=goodsExplanation>
                    <h6>-2015년 게임즈컴 ""최고의 RPG"" 상 수상과 35개가 넘는 상을 E3 2015에서 수상-</h6>
                    <hr>
                    <p>장르를 새로 개척했다는 평가를 들으며 많은 좋은 평가들을
                        얻고 있는 다크 소울 시리즈는 계속해서 한계를 넘어서,
                        더욱 야심찬 단계에 도전하고자 하고 있습니다.
                        준비를 하고 어둠을 밝히십시오!</p>
                    <div class="container">
                        <div class="row">
                            <div class="col-sm-4">
                                개발사
                            </div>
                            <div class="col-sm-8">
                                <img src="https://ww.namu.la/s/236f66a69f80688d087eb63d371d529500687bb8d13d223012c3eb831210974d1d72fbe5c2822beb398e2aeda3b1d9c069c51fa092fb2a3958bfe2673945eb6f9fdfeded1c40a1377f35684721da764ac9821eac17263502d40023e4265a18a3" style="width: 3cm; height: 10px;">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                장르
                            </div>
                            <div class="col-sm-8">
                                3인칭 액션 RPG
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                출시일자
                            </div>
                            <div class="col-sm-8">
                                2016년 4월 12일
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                제품가격
                            </div>
                            <div class="col-sm-8">
                                ₩ 49,800 (DLC 별도)
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-4">
                <div class="goodsScript">
                    <div class="container">
                        <div class="row">
                            <h2 class="ds">『Dark Soul lll』</h2>
                            <h2>주문하기</h2>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-4">
                                <h5>주문자 명</h5>
                            </div>
                            <div class="col-sm-8">
                                <input type="name" name="name" id = "order-name" style="width: 10cm;">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <h5>주문자 연락처</h5>
                            </div>
                            <div class="col-sm-8">
                                <input type="number" name="phone" id = "order-phone"style="width: 10cm;">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <h5>주소</h5>
                            </div>
                            <div class="col-sm-8">
                                <input type="address" name="address" id = "order-address"style="width: 10cm;">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <h5>결제수단</h5>
                            </div>
                            <div class="col-sm-8">
                                <input type="radio"  checked="checked" name="payment" value="1">계좌이체
                                <input type="radio" name="payment" value="2">신용카드
                            </div>
                        </div>
                    </div>

                    <br>
                    <button type="button" onclick="make_Order()" class="btn btn-primary btn-lg">결제하기</button>
                </div>
            </div>
            <div class="col-4"></div>
        </div>

        <div class="orders">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">이름</th>
                        <th scope="col">전화번호</th>
                        <th scope="col">주소</th>
                        <th scope="col">결제수단</th>
                    </tr>
                </thead>
                <tbody id="orders-box">
                    <tr>
                        <td>Otto</td>
                        <td>@mdo</td>
                        <td>@mdo</td>
                        <td>@mdo</td>
                    </tr>
                </tbody>
            </table>
        </div>



    </div>

</body>

</html>